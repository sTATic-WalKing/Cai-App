cmake_minimum_required(VERSION 3.14)
project(BridgeProject)

# Set the target operating system and version
set(CMAKE_SYSTEM_NAME iOS)
set(CMAKE_OSX_DEPLOYMENT_TARGET "10.0" CACHE STRING "Minimum iOS deployment version")
set(CMAKE_OSX_SYSROOT "iphoneos")
# Set the architectures for iOS
set(CMAKE_OSX_ARCHITECTURES "arm64" CACHE STRING "iOS Architecture" FORCE)

set_target_properties(BridgeProject PROPERTIES
    XCODE_ATTRIBUTE_DEVELOPMENT_TEAM "TEAM_ID"
)

# Specify the C standard
set(CMAKE_C_STANDARD 99)
set(CMAKE_C_STANDARD_REQUIRED ON)

# Define your source files
set(SOURCE_FILES bridge.m) # Update with your actual source files
add_library(BridgeProject SHARED ${SOURCE_FILES})

# Specify the path to the DynamsoftBarcodeReader framework and link it
find_library(DYNAMSOFT_BARCODE_READER DynamsoftBarcodeReader PATHS ${PROJECT_SOURCE_DIR}/../ )
target_link_libraries(BridgeProject PRIVATE "-framework UIKit" "${PROJECT_SOURCE_DIR}/../DynamsoftBarcodeReader.framework/DynamsoftBarcodeReader")
target_include_directories(BridgeProject PRIVATE ${PROJECT_SOURCE_DIR}/../DynamsoftBarcodeReader.framework/Headers)

# CMAKE_XCODE_ATTRIBUTE_DEVELOPMENT_TEAM
